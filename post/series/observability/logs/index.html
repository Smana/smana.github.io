<!doctype html><html lang=en data-figures class=page><head><title>`VictoriaLogs`: What if logs management became simple and performant? | Ogenki</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta http-equiv=X-UA-Compatible content="IE=edge"><script async src="https://www.googletagmanager.com/gtag/js?id=XXXXXXXXXX"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","XXXXXXXXXX")</script><meta property="og:locale" content="en"><meta property="og:locale:alternate" content="fr"><meta property="og:type" content="article"><meta name=description content="In the era of distributed architectures, fast and efficient logs search remains a challenge, involving solutions that are sometimes complex to deploy and …"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@smana.dev"><meta name=twitter:title content="`VictoriaLogs`: What if logs management became simple and performant?"><meta name=twitter:image content="https://blog.ogenki.io/post/series/observability/logs/thumbnail.png"><meta property="og:url" content="https://blog.ogenki.io/post/series/observability/logs/"><meta property="og:title" content="`VictoriaLogs`: What if logs management became simple and performant?"><meta property="og:description" content="In the era of distributed architectures, fast and efficient logs search remains a challenge, involving solutions that are sometimes complex to deploy and …"><meta property="og:image" content="https://blog.ogenki.io/post/series/observability/logs/thumbnail.png"><meta name=keywords content="observability"><link rel=apple-touch-icon sizes=180x180 href=https://blog.ogenki.io/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://blog.ogenki.io/icons/favicon-32x32.png><link rel=manifest href=https://blog.ogenki.io/icons/site.webmanifest><link rel=canonical href=https://blog.ogenki.io/post/series/observability/logs/><link rel=preload href=https://blog.ogenki.io/css/styles.a556cef0edd8ecd9821e661f7f201d84cc18d0c6435703889db2949aea0eccb84b7ac9a2bb49093b03f5e7d9ce21c23c705efd6dcbd7e8018afae9a9f32ca095.css integrity="sha512-pVbO8O3Y7NmCHmYffyAdhMwY0MZDVwOInbKUmuoOzLhLesmiu0kJOwP159nOIcI8cF79bcvX6AGK+ump8yyglQ==" as=style crossorigin=anonymous><link rel=preload href=https://blog.ogenki.io/en/js/bundle.fb0be5bcaafc43d845951fd0966e48e5a7bf36be99ce2176c89d369bb5a8136dfb14e596d145cfa04c4c3b79232ffffd811a01eccee956d9d61cf49330e633c7.js as=script integrity="sha512-+wvlvKr8Q9hFlR/Qlm5I5ae/Nr6ZziF2yJ02m7WoE237FOWW0UXPoExMO3kjL//9gRoB7M7pVtnWHPSTMOYzxw==" crossorigin=anonymous><link rel=stylesheet type=text/css href=https://blog.ogenki.io/css/styles.a556cef0edd8ecd9821e661f7f201d84cc18d0c6435703889db2949aea0eccb84b7ac9a2bb49093b03f5e7d9ce21c23c705efd6dcbd7e8018afae9a9f32ca095.css integrity="sha512-pVbO8O3Y7NmCHmYffyAdhMwY0MZDVwOInbKUmuoOzLhLesmiu0kJOwP159nOIcI8cF79bcvX6AGK+ump8yyglQ==" crossorigin=anonymous></head><body data-code=25 data-lines=false id=documentTop data-lang=en><header class=nav_header><nav class=nav><a href=https://blog.ogenki.io/ class="nav_brand nav_item" title=Ogenki><img src=https://blog.ogenki.io/logos/logo.png class=logo alt=Ogenki><div class=nav_close><div><svg class="icon"><title>open-menu</title><use xlink:href="#open-menu"/></svg>
<svg class="icon"><title>closeme</title><use xlink:href="#closeme"/></svg></div></div></a><div class='nav_body nav_body_left'><div class=nav_parent><a href=https://blog.ogenki.io/ class=nav_item title=Home>Home</a></div><div class=nav_parent><a href=https://blog.ogenki.io/ class=nav_item title=Links>Links <img src=https://blog.ogenki.io/icons/caret-icon.svg alt=icon class=nav_icon></a><div class=nav_sub><span class=nav_child></span>
<a href=https://bsky.app/profile/smana.dev class="nav_child nav_item" title=Bluesky>Bluesky</a>
<a href=https://www.linkedin.com/in/sma%C3%AFne-kahlouch-44374110/ class="nav_child nav_item" title=LinkedIn>LinkedIn</a></div></div><div class=nav_parent><a href=https://blog.ogenki.io/about/ class=nav_item title=About>About</a></div><div class=nav_parent><a href=# class=nav_item>🌐</a><div class=nav_sub><span class=nav_child></span>
<a href=https://blog.ogenki.io/ class="nav_child nav_item">English</a>
<a href=https://blog.ogenki.io/fr/ class="nav_child nav_item">Français</a></div></div><div class=follow><a href=https://github.com/Smana><svg class="icon"><title>github</title><use xlink:href="#github"/></svg>
</a><a href=https://www.linkedin.com/in/sma%C3%AFne-kahlouch-44374110/><svg class="icon"><title>linkedin</title><use xlink:href="#linkedin"/></svg>
</a><a href=https://bsky.app/profile/smana.dev><svg class="icon"><title>bluesky</title><use xlink:href="#bluesky"/></svg></a><div class=color_mode><input type=checkbox class=color_choice id=mode></div></div></div></nav></header><main><div class="grid-inverse wrap content"><article class=post_content><h1 class=post_title><code>VictoriaLogs</code>: What if logs management became simple and performant?</h1><div class=post_meta><span><svg class="icon"><title>calendar</title><use xlink:href="#calendar"/></svg>
</span><span class=post_date>25-08-2025</span>
<span class=post_time>· 16 min read</span><span>&nbsp;· <a href=https://blog.ogenki.io/tags/observability/ title=observability class="post_tag button button_translucent">observability
</a></span><span class=page_only>&nbsp;·<div class=post_share>Share on:
<a href="https://twitter.com/intent/tweet?text=%60VictoriaLogs%60%3a%20What%20if%20logs%20management%20became%20simple%20and%20performant%3f&url=https%3a%2f%2fblog.ogenki.io%2fpost%2fseries%2fobservability%2flogs%2f&tw_p=tweetbutton" class=twitter title="Share on Twitter" target=_blank rel=nofollow><svg class="icon"><title>twitter</title><use xlink:href="#twitter"/></svg>
</a><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fblog.ogenki.io%2fpost%2fseries%2fobservability%2flogs%2f&t=%60VictoriaLogs%60%3a%20What%20if%20logs%20management%20became%20simple%20and%20performant%3f" class=facebook title="Share on Facebook" target=_blank rel=nofollow><svg class="icon"><title>facebook</title><use xlink:href="#facebook"/></svg>
</a><a href=#linkedinshare id=linkedinshare class=linkedin title="Share on LinkedIn" rel=nofollow><svg class="icon"><title>linkedin</title><use xlink:href="#linkedin"/></svg>
</a><a href=https://blog.ogenki.io/post/series/observability/logs/ title="Copy Link" class="link link_yank"><svg class="icon"><title>copy</title><use xlink:href="#copy"/></svg></a></div></span></div><div class=post_toc><h2>Overview</h2><nav id=TableOfContents><ul><li><a href=#-what-are-our-logs-for>❓ What are our logs for?</a></li><li><a href=#-victorialogs-an-answer-to-logs-management-and-analysis>🚀 VictoriaLogs: An answer to logs management and analysis</a><ul><li><a href=#-ingestion-and-storage>🗃️ Ingestion and Storage</a></li></ul></li><li><a href=#-installation-and-configuration>🏗️ Installation and Configuration</a></li><li><a href=#-logsql-a-powerful-and-easy-to-learn-language>👩‍💻 LogsQL: A powerful and easy-to-learn language</a><ul><li><a href=#-kubernetes-events>☸ Kubernetes Events</a></li><li><a href=#-web-server-logs>🌐 Web Server Logs</a></li></ul></li><li><a href=#-grafana-integration>📊 Grafana Integration</a></li><li><a href=#-sending-alerts>🚨 Sending Alerts</a></li><li><a href=#-final-remarks>💭 Final Remarks</a></li><li><a href=#-references>🔖 References</a></li></ul></nav></div><div class=post_body><div class="notices info"><div class=label>How are our applications performing? 👁️</div><p>Once our application is deployed, it is essential to have indicators that help identify potential issues and track performance changes. Among these sources of information, <strong>metrics</strong> and <strong>logs</strong> play an essential role by providing valuable insights into the application's operation. Additionally, it is often useful to implement detailed <strong>tracing</strong> to accurately track all actions performed within the application.</p><p>In this <a href=https://blog.ogenki.io/fr/tags/observability/>series of blog posts</a>, we will explore the various areas of application monitoring. The goal is to thoroughly analyze the state of our applications, in order to improve their <strong>availability</strong> and <strong>performance</strong>, while ensuring an optimal user experience.</p></div><p>Too often, logs management means complex solutions and slow queries. Yet <strong>logs</strong> are an essential pillar for understanding, diagnosing, and improving our applications performance and health.</p><p>Indeed, while <em>metrics</em> allow us to observe indicator evolution over time and <em>traces</em> let us follow a request's journey through our platform, logs provide the <strong>detailed context</strong> important for understanding events.</p><h2 id=-what-are-our-logs-for>❓ What are our logs for?</h2><p>Logs aren't just simple messages we accumulate in a corner of our infrastructure: they constitute the living <strong>memory</strong> of our systems. They're useful because they fulfill several critical roles, here are some concrete scenarios:</p><ul><li><strong>Diagnostics and Troubleshooting</strong>: An e-commerce application encounters 500 errors during payment; logs help trace the exact sequence of calls, identify that an external dependency (e.g., payment API) is the cause, and quickly fix the problem.</li><li><strong>Security and Compliance</strong>: Logs reveal suspicious connection attempts outside of normal hours; they help detect a <em>brute force</em> attack and strengthen security. They are also essential for meeting regulatory requirements (<a href=https://en.wikipedia.org/wiki/General_Data_Protection_Regulation>GDPR</a>, <a href=https://www.pcisecuritystandards.org/standards/pci-dss/>PCI DSS</a>, etc.).</li><li><strong>Proactive Monitoring and Alerting</strong>: Alerting rules automatically detect an abnormal increase in the error rate in the logs of a critical service, allowing intervention before the situation worsens.</li><li><strong>Audit and Traceability</strong>: During a GDPR audit, access logs make it possible to precisely reconstruct the history of actions on personal data.</li></ul><p>But for these use cases to reveal their full value, it's not enough to collect logs: you must be able to <strong>search them quickly</strong>, <strong>formulate simple queries</strong>, and ensure their <strong>long-term retention</strong> without exploding costs or complexity.</br></p><p><strong>This is exactly where <code>VictoriaLogs</code> comes into play</strong> 🔎</p><h2 id=-victorialogs-an-answer-to-logs-management-and-analysis>🚀 VictoriaLogs: An answer to logs management and analysis</h2><p>With the adoption of distributed architectures, our platforms generate ever-increasing number of logs.</br></p><p>To leverage these growing volumes, we've traditionally used solutions like ELK (Elasticsearch, Logstash, Kibana) or Grafana Loki, which can sometimes involve operational complexity.</p><p>In 2023, <code>VictoriaLogs</code> emerged as a promising alternative that might just change the game.</p><p>Developed by the team behind the increasingly popular <em>time series</em> database <code>VictoriaMetrics</code>, VictoriaLogs inherits the same qualities. Here are its main features:</p><ul><li><strong>Easy to deploy and operate</strong>: Its installation and configuration are quite simple, and we will explore the most advanced mode (cluster) together below.</li><li><strong>High performance</strong>: Optimized for massive log ingestion and fast analytical queries, even on very large data volumes.</li><li><strong>Resource efficiency</strong>: Low CPU and memory footprint, and effective data compression to minimize storage costs compared to other logs management systems.</li><li><strong>Integration with the VictoriaMetrics ecosystem</strong>: Integrates naturally with VictoriaMetrics for a unified observability solution, with VMAlert for alerting, and with Grafana for visualization.</li><li><strong>Fast Full-Text and Label-based Search</strong>: VictoriaLogs allows for both full-text searches on log content and precise filtering by labels.</li></ul><div class="notices info"><div class=label>🆚 Compared to Elasticsearch or Loki?</div><p>Several <a href=/post/series/observability/logs/#-comparisons-and-performance-analyses>references</a> attest to the <strong>performance</strong> of VictoriaLogs compared to other log management solutions.</p><p>The performance gaps, when compared with ELK or Loki, are quite impressive, whether in terms of <strong>memory usage</strong> or data <strong>compression</strong>.</p><p>Regarding log search, VictoriaLogs stands out by effectively combining Elasticsearch's full-text search and Loki's label-based filtering, thus offering the best of <strong>both approaches</strong> while maintaining fast query execution.</p></div><h3 id=-ingestion-and-storage>🗃️ Ingestion and Storage</h3><p>A log in VictoriaLogs is typically a <strong>JSON object</strong>. Every log must contain the following fields:</p><ul><li><code>_msg</code>: The raw content of the log message, as produced by the application.</li><li><code>_time</code>: The timestamp of the log.</li><li><code>_stream</code>: A set of labels (key-value) that uniquely identify the log source.</li></ul><p>💡 In addition to these fields, any other field can be added to the JSON to simplify and optimize search for relevant information according to the context (We will see some examples later).</p><div class="notices info"><div class=label>The Importance of the Stream</div><p>The <code>_stream</code> field in VictoriaLogs optimizes compression and ensures ultra-fast search thanks to the contiguous storage of logs sharing the same labels.</p><p>Efficiency depends on a <strong>careful choice</strong>: only constant fields that uniquely identify an application instance (container, namespace, pod) should be part of the stream. Dynamic fields (IP, user_id, trace_id) must remain in the message to avoid excessively high cardinality.</p></div><p>It's possible to store a log simply via a <code>curl</code> command, or by <a href=https://docs.victoriametrics.com/victorialogs/data-ingestion/#log-collectors-and-data-ingestion-formats>using various agents</a> for collecting and transporting logs such as <em>Promtail</em>, <em>FluentBit</em>, <em>OpenTelemetry</em>, and many others.</br></p><p>I chose <a href=https://vector.dev/><strong>Vector</strong></a> because it's a very high-performance solution but also because it's offered by default in the Helm chart we're going to use 😉.</p><p>Among the required configuration elements, you must specify the destination but also the essential fields we mentioned earlier, which are configured here using HTTP headers.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=w>    </span><span class=nt>sinks</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w>      </span><span class=nt>vlogs-0</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w>        </span><span class=nt>compression</span><span class=p>:</span><span class=w> </span><span class=l>gzip</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>        </span><span class=nt>endpoints</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>        </span>- <span class=l>http://&lt;victorialogs_host&gt;:9428/insert/elasticsearch</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>        </span><span class=nt>healthcheck</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>          </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>        </span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>        </span>- <span class=l>parser</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>        </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>bulk</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>        </span><span class=nt>request</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>          </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>            </span><span class=nt>AccountID</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>            </span><span class=nt>ProjectID</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;0&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w>            </span><span class=nt>VL-Msg-Field</span><span class=p>:</span><span class=w> </span><span class=l>message,msg,_msg,log.msg,log.message,log</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w>            </span><span class=nt>VL-Stream-Fields</span><span class=p>:</span><span class=w> </span><span class=l>stream,kubernetes.pod_name,kubernetes.container_name,kubernetes.pod_namespace</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>            </span><span class=nt>VL-Time-Field</span><span class=p>:</span><span class=w> </span><span class=l>timestamp</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>        </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>elasticsearch</span><span class=w>
</span></span></span></code></pre></div><p>💡 The header <code>VL-Msg-Field</code> tells Vector to search for the log content in several common field names, providing flexibility for different log sources</p><p>The logs are collected on a Kubernetes cluster, and Vector <strong>enriches</strong> them with numerous fields to precisely identify their source. Here is a concrete example of an enriched log as it is stored in VictoriaLogs (This log has been intentionally truncated for the purpose of this article):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=ln> 1</span><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>    <span class=nt>&#34;_time&#34;</span><span class=p>:</span> <span class=s2>&#34;2025-07-29T07:25:49.870820279Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>    <span class=nt>&#34;_stream_id&#34;</span><span class=p>:</span> <span class=s2>&#34;00000000000000006a98e166d58afc9efc6ea35a22d87f1b&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=nt>&#34;_stream&#34;</span><span class=p>:</span> <span class=s2>&#34;{kubernetes.container_name=\&#34;loggen\&#34;,kubernetes.pod_name=\&#34;loggen-loggen-68dc4f9b8b-6mrqj\&#34;,kubernetes.pod_namespace=\&#34;observability\&#34;,stream=\&#34;stdout\&#34;}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=nt>&#34;_msg&#34;</span><span class=p>:</span> <span class=s2>&#34;236.161.251.196 - [07/Jul/2025:08:13:41 ] \&#34;GET /homepage HTTP/2\&#34; 204 4367 \&#34;http://localhost/\&#34; \&#34;curl/7.68.0\&#34; \&#34;DE\&#34; 0.83&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=nt>&#34;file&#34;</span><span class=p>:</span> <span class=s2>&#34;/var/log/pods/observability_loggen-loggen-68dc4f9b8b-6mrqj_33076791-133a-490f-bd44-97717d242a61/loggen/0.log&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=nt>&#34;kubernetes.container_name&#34;</span><span class=p>:</span> <span class=s2>&#34;loggen&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=nt>&#34;kubernetes.node_labels.beta.kubernetes.io/instance-type&#34;</span><span class=p>:</span> <span class=s2>&#34;c5.xlarge&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=nt>&#34;kubernetes.node_labels.beta.kubernetes.io/os&#34;</span><span class=p>:</span> <span class=s2>&#34;linux&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=nt>&#34;kubernetes.node_[labels.eks.amazonaws.com/capacityType](https://labels.eks.amazonaws.com/capacityType)&#34;</span><span class=p>:</span> <span class=s2>&#34;SPOT&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=nt>&#34;kubernetes.pod_ip&#34;</span><span class=p>:</span> <span class=s2>&#34;10.0.33.16&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=nt>&#34;kubernetes.pod_labels.app.kubernetes.io/name&#34;</span><span class=p>:</span> <span class=s2>&#34;loggen&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=nt>&#34;kubernetes.pod_name&#34;</span><span class=p>:</span> <span class=s2>&#34;loggen-loggen-68dc4f9b8b-6mrqj&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=nt>&#34;kubernetes.pod_namespace&#34;</span><span class=p>:</span> <span class=s2>&#34;observability&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=nt>&#34;kubernetes.pod_node_name&#34;</span><span class=p>:</span> <span class=s2>&#34;ip-10-0-47-231.eu-west-3.compute.internal&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=nt>&#34;source_type&#34;</span><span class=p>:</span> <span class=s2>&#34;kubernetes_logs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=nt>&#34;stream&#34;</span><span class=p>:</span> <span class=s2>&#34;stdout&#34;</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=err>&lt;REDACTED&gt;</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>  <span class=p>}</span>
</span></span></code></pre></div><p>Now that we have an overview of how VictoriaLogs works, I'll propose an installation and configuration method that can be considered for production.</p><h2 id=-installation-and-configuration>🏗️ Installation and Configuration</h2><p>VictoriaLogs can be installed in 2 ways:</p><ul><li><p>A <code>Single</code> mode which has the advantage of being very simple because a single binary handles all operations. This is the <strong>preferred</strong> mode because it's simple to operate. If you have a powerful machine with enough resources to meet your needs, this mode will always be more performant as it doesn't require network transfers between the different components of the cluster mode.</br>💡 To ensure high availability, we can also deploy 2 <code>Single</code> instances as described <a href=https://docs.victoriametrics.com/victorialogs/#single-mode>here</a>.</p></li><li><p>The <code>Cluster</code> mode is used for very high loads and when horizontal scaling is needed (when a single machine is not sufficient to meet the demand). Since this is the mode that provides the most flexibility for scaling, we will explore it in this article.</p></li></ul><center><img src=vcluster.png width=800 alt></center><p>If you've read the <a href=https://blog.ogenki.io/post/series/observability/metrics/>previous article on VictoriaMetrics</a>, you'll notice that the cluster mode architecture is very similar:</p><ul><li><p><strong>VLStorage</strong>: This is the component responsible for persisting logs to disk. It's therefore a <a href=https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/>Statefulset</a>, and each pod has a dedicated volume (<a href=https://kubernetes.io/docs/concepts/storage/persistent-volumes/>Persistent Volume</a>).</p></li><li><p><strong>VLInsert</strong>: This component receives logs from various sources and protocols and is responsible for distributing them to the VLStorages.</p></li><li><p><strong>Vector</strong>: Deployed as a <a href=https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/>DaemonSet</a>, Vector is responsible for transferring logs stored on Kubernetes nodes to the VLInsert service.</p></li><li><p><strong>VLSelect</strong>: This is the service that exposes the API allowing us to execute queries. Data is retrieved from the VLStorages.</p></li><li><p><strong>VMAlert</strong>: To be able to send alerts based on logs, a dedicated <a href=https://docs.victoriametrics.com/victoriametrics/vmalert/>VMAlert</a> instance is deployed.</p></li></ul><p>The installation is done using the <a href=https://docs.victoriametrics.com/helm/>Helm chart</a> provided by VictoriaMetrics, by setting a few variables. Here is an example suitable for EKS that we will describe below:</p><p><a href=https://github.com/Smana/cloud-native-ref/blob/main/observability/base/victoria-logs/helmrelease-vlcluster.yaml>observability/base/victoria-logs/helmrelease-vlcluster.yaml</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>  1</span><span class=cl><span class=w>    </span><span class=nt>printNotes</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln>  2</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>  3</span><span class=cl><span class=w>    </span><span class=nt>vlselect</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>  4</span><span class=cl><span class=w>      </span><span class=nt>horizontalPodAutoscaler</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>  5</span><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln>  6</span><span class=cl><span class=w>        </span><span class=nt>maxReplicas</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span></span></span><span class=line><span class=ln>  7</span><span class=cl><span class=w>        </span><span class=nt>minReplicas</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=ln>  8</span><span class=cl><span class=w>        </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>  9</span><span class=cl><span class=w>          </span>- <span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Resource</span><span class=w>
</span></span></span><span class=line><span class=ln> 10</span><span class=cl><span class=w>            </span><span class=nt>resource</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 11</span><span class=cl><span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cpu</span><span class=w>
</span></span></span><span class=line><span class=ln> 12</span><span class=cl><span class=w>              </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 13</span><span class=cl><span class=w>                </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Utilization</span><span class=w>
</span></span></span><span class=line><span class=ln> 14</span><span class=cl><span class=w>                </span><span class=nt>averageUtilization</span><span class=p>:</span><span class=w> </span><span class=m>70</span><span class=w>
</span></span></span><span class=line><span class=ln> 15</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 16</span><span class=cl><span class=w>      </span><span class=nt>podDisruptionBudget</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 17</span><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln> 18</span><span class=cl><span class=w>        </span><span class=nt>minAvailable</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=ln> 19</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 20</span><span class=cl><span class=w>      </span><span class=nt>affinity</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 21</span><span class=cl><span class=w>        </span><span class=nt>podAntiAffinity</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 22</span><span class=cl><span class=w>          </span><span class=nt>requiredDuringSchedulingIgnoredDuringExecution</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 23</span><span class=cl><span class=w>            </span>- <span class=nt>labelSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 24</span><span class=cl><span class=w>                </span><span class=nt>matchExpressions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 25</span><span class=cl><span class=w>                  </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;app&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 26</span><span class=cl><span class=w>                    </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class=l>In</span><span class=w>
</span></span></span><span class=line><span class=ln> 27</span><span class=cl><span class=w>                    </span><span class=nt>values</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 28</span><span class=cl><span class=w>                      </span>- <span class=s2>&#34;vlselect&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 29</span><span class=cl><span class=w>              </span><span class=nt>topologyKey</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;kubernetes.io/hostname&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 30</span><span class=cl><span class=w>      </span><span class=nt>topologySpreadConstraints</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 31</span><span class=cl><span class=w>        </span>- <span class=nt>labelSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 32</span><span class=cl><span class=w>            </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 33</span><span class=cl><span class=w>              </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>vlselect</span><span class=w>
</span></span></span><span class=line><span class=ln> 34</span><span class=cl><span class=w>          </span><span class=nt>maxSkew</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=ln> 35</span><span class=cl><span class=w>          </span><span class=nt>topologyKey</span><span class=p>:</span><span class=w> </span><span class=l>topology.kubernetes.io/zone</span><span class=w>
</span></span></span><span class=line><span class=ln> 36</span><span class=cl><span class=w>          </span><span class=nt>whenUnsatisfiable</span><span class=p>:</span><span class=w> </span><span class=l>ScheduleAnyway</span><span class=w>
</span></span></span><span class=line><span class=ln> 37</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 38</span><span class=cl><span class=w>      </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 39</span><span class=cl><span class=w>        </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 40</span><span class=cl><span class=w>          </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=l>100m</span><span class=w>
</span></span></span><span class=line><span class=ln> 41</span><span class=cl><span class=w>          </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>200Mi</span><span class=w>
</span></span></span><span class=line><span class=ln> 42</span><span class=cl><span class=w>        </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 43</span><span class=cl><span class=w>          </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=l>100m</span><span class=w>
</span></span></span><span class=line><span class=ln> 44</span><span class=cl><span class=w>          </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>200Mi</span><span class=w>
</span></span></span><span class=line><span class=ln> 45</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 46</span><span class=cl><span class=w>      </span><span class=nt>vmServiceScrape</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 47</span><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln> 48</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 49</span><span class=cl><span class=w>    </span><span class=nt>vlinsert</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 50</span><span class=cl><span class=w>      </span><span class=nt>horizontalPodAutoscaler</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 51</span><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln> 52</span><span class=cl><span class=w>        </span><span class=nt>maxReplicas</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span></span></span><span class=line><span class=ln> 53</span><span class=cl><span class=w>        </span><span class=nt>minReplicas</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=ln> 54</span><span class=cl><span class=w>        </span><span class=nt>metrics</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 55</span><span class=cl><span class=w>          </span>- <span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Resource</span><span class=w>
</span></span></span><span class=line><span class=ln> 56</span><span class=cl><span class=w>            </span><span class=nt>resource</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 57</span><span class=cl><span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cpu</span><span class=w>
</span></span></span><span class=line><span class=ln> 58</span><span class=cl><span class=w>              </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 59</span><span class=cl><span class=w>                </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Utilization</span><span class=w>
</span></span></span><span class=line><span class=ln> 60</span><span class=cl><span class=w>                </span><span class=nt>averageUtilization</span><span class=p>:</span><span class=w> </span><span class=m>70</span><span class=w>
</span></span></span><span class=line><span class=ln> 61</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 62</span><span class=cl><span class=w>      </span><span class=nt>podDisruptionBudget</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 63</span><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln> 64</span><span class=cl><span class=w>        </span><span class=nt>minAvailable</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=ln> 65</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 66</span><span class=cl><span class=w>      </span><span class=nt>affinity</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 67</span><span class=cl><span class=w>        </span><span class=nt>podAntiAffinity</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 68</span><span class=cl><span class=w>          </span><span class=nt>requiredDuringSchedulingIgnoredDuringExecution</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 69</span><span class=cl><span class=w>            </span>- <span class=nt>labelSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 70</span><span class=cl><span class=w>                </span><span class=nt>matchExpressions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 71</span><span class=cl><span class=w>                  </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;app&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 72</span><span class=cl><span class=w>                    </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class=l>In</span><span class=w>
</span></span></span><span class=line><span class=ln> 73</span><span class=cl><span class=w>                    </span><span class=nt>values</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 74</span><span class=cl><span class=w>                      </span>- <span class=s2>&#34;vlinsert&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 75</span><span class=cl><span class=w>              </span><span class=nt>topologyKey</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;kubernetes.io/hostname&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 76</span><span class=cl><span class=w>      </span><span class=nt>topologySpreadConstraints</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 77</span><span class=cl><span class=w>        </span>- <span class=nt>labelSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 78</span><span class=cl><span class=w>            </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 79</span><span class=cl><span class=w>              </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>vlinsert</span><span class=w>
</span></span></span><span class=line><span class=ln> 80</span><span class=cl><span class=w>          </span><span class=nt>maxSkew</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=ln> 81</span><span class=cl><span class=w>          </span><span class=nt>topologyKey</span><span class=p>:</span><span class=w> </span><span class=l>topology.kubernetes.io/zone</span><span class=w>
</span></span></span><span class=line><span class=ln> 82</span><span class=cl><span class=w>          </span><span class=nt>whenUnsatisfiable</span><span class=p>:</span><span class=w> </span><span class=l>ScheduleAnyway</span><span class=w>
</span></span></span><span class=line><span class=ln> 83</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 84</span><span class=cl><span class=w>      </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 85</span><span class=cl><span class=w>        </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 86</span><span class=cl><span class=w>          </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=l>100m</span><span class=w>
</span></span></span><span class=line><span class=ln> 87</span><span class=cl><span class=w>          </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>200Mi</span><span class=w>
</span></span></span><span class=line><span class=ln> 88</span><span class=cl><span class=w>        </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 89</span><span class=cl><span class=w>          </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=l>100m</span><span class=w>
</span></span></span><span class=line><span class=ln> 90</span><span class=cl><span class=w>          </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>200Mi</span><span class=w>
</span></span></span><span class=line><span class=ln> 91</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 92</span><span class=cl><span class=w>      </span><span class=nt>vmServiceScrape</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 93</span><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln> 94</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln> 95</span><span class=cl><span class=w>    </span><span class=nt>vlstorage</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 96</span><span class=cl><span class=w>      </span><span class=c># -- Enable deployment of vlstorage component. StatefulSet is used</span><span class=w>
</span></span></span><span class=line><span class=ln> 97</span><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln> 98</span><span class=cl><span class=w>      </span><span class=nt>retentionPeriod</span><span class=p>:</span><span class=w> </span><span class=l>7d</span><span class=w>
</span></span></span><span class=line><span class=ln> 99</span><span class=cl><span class=w>      </span><span class=nt>retentionDiskSpaceUsage</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;9GiB&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>100</span><span class=cl><span class=w>      </span><span class=nt>replicaCount</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=ln>101</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>102</span><span class=cl><span class=w>      </span><span class=nt>podDisruptionBudget</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>103</span><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln>104</span><span class=cl><span class=w>        </span><span class=nt>minAvailable</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=ln>105</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>106</span><span class=cl><span class=w>      </span><span class=nt>affinity</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>107</span><span class=cl><span class=w>        </span><span class=nt>podAntiAffinity</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>108</span><span class=cl><span class=w>          </span><span class=nt>requiredDuringSchedulingIgnoredDuringExecution</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>109</span><span class=cl><span class=w>            </span>- <span class=nt>labelSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>110</span><span class=cl><span class=w>                </span><span class=nt>matchExpressions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>111</span><span class=cl><span class=w>                  </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;app&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>112</span><span class=cl><span class=w>                    </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class=l>In</span><span class=w>
</span></span></span><span class=line><span class=ln>113</span><span class=cl><span class=w>                    </span><span class=nt>values</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>114</span><span class=cl><span class=w>                      </span>- <span class=s2>&#34;vlstorage&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>115</span><span class=cl><span class=w>              </span><span class=nt>topologyKey</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;kubernetes.io/hostname&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>116</span><span class=cl><span class=w>      </span><span class=nt>topologySpreadConstraints</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>117</span><span class=cl><span class=w>        </span>- <span class=nt>labelSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>118</span><span class=cl><span class=w>            </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>119</span><span class=cl><span class=w>              </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>vlstorage</span><span class=w>
</span></span></span><span class=line><span class=ln>120</span><span class=cl><span class=w>          </span><span class=nt>maxSkew</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=ln>121</span><span class=cl><span class=w>          </span><span class=nt>topologyKey</span><span class=p>:</span><span class=w> </span><span class=l>topology.kubernetes.io/zone</span><span class=w>
</span></span></span><span class=line><span class=ln>122</span><span class=cl><span class=w>          </span><span class=nt>whenUnsatisfiable</span><span class=p>:</span><span class=w> </span><span class=l>ScheduleAnyway</span><span class=w>
</span></span></span><span class=line><span class=ln>123</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>124</span><span class=cl><span class=w>      </span><span class=nt>persistentVolume</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>125</span><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln>126</span><span class=cl><span class=w>        </span><span class=nt>size</span><span class=p>:</span><span class=w> </span><span class=l>10Gi</span><span class=w>
</span></span></span><span class=line><span class=ln>127</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>128</span><span class=cl><span class=w>      </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>129</span><span class=cl><span class=w>        </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>130</span><span class=cl><span class=w>          </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=l>500m</span><span class=w>
</span></span></span><span class=line><span class=ln>131</span><span class=cl><span class=w>          </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>512Mi</span><span class=w>
</span></span></span><span class=line><span class=ln>132</span><span class=cl><span class=w>        </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>133</span><span class=cl><span class=w>          </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=l>500m</span><span class=w>
</span></span></span><span class=line><span class=ln>134</span><span class=cl><span class=w>          </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>512Mi</span><span class=w>
</span></span></span><span class=line><span class=ln>135</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>136</span><span class=cl><span class=w>      </span><span class=nt>vmServiceScrape</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>137</span><span class=cl><span class=w>        </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln>138</span><span class=cl><span class=w>
</span></span></span><span class=line><span class=ln>139</span><span class=cl><span class=w>    </span><span class=nt>vector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>140</span><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span></code></pre></div><ul><li><p><strong>Autoscaling</strong>: The stateless components (<code>VLSelect</code> and <code>VLInsert</code>) are configured to scale automatically beyond 70% CPU usage.</p></li><li><p><strong>Log Persistence</strong>: For this demo environment, each <code>VLStorage</code> instance has a 10Gi EBS volume with a 7-day retention period to prevent disk saturation.</p></li><li><p><strong>High Availability</strong>: The configuration ensures maximum availability through distribution across different zones (<code>topologySpreadConstraints</code>) and pod anti-affinity for each component.</p></li><li><p><strong>Monitoring</strong>: The <code>vmServiceScrape</code> settings automatically expose the metrics of each component for monitoring via the <a href=https://blog.ogenki.io/post/series/observability/metrics/#-configuration>VictoriaMetrics operator</a>.</p></li></ul><p>Once the Helm chart is installed, we can check that all pods have started correctly.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=ln> 1</span><span class=cl><span class=go>kubectl get po -n observability -l app.kubernetes.io/instance=victoria-logs
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=go>NAME                                                            READY   STATUS    RESTARTS   AGE
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=go>victoria-logs-vector-9gww4                                      1/1     Running   0          11m
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=go>victoria-logs-vector-frj8l                                      1/1     Running   0          10m
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=go>victoria-logs-vector-jxm95                                      1/1     Running   0          10m
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=go>victoria-logs-vector-kr6q6                                      1/1     Running   0          12m
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=go>victoria-logs-vector-pg2fc                                      1/1     Running   0          12m
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=go>victoria-logs-victoria-logs-cluster-vlinsert-dbd47c5fd-cmqj9    1/1     Running   0          11m
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=go>victoria-logs-victoria-logs-cluster-vlinsert-dbd47c5fd-mbkwx    1/1     Running   0          12m
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=go>victoria-logs-victoria-logs-cluster-vlselect-7fbfbd9f8f-nmv8t   1/1     Running   0          11m
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=go>victoria-logs-victoria-logs-cluster-vlselect-7fbfbd9f8f-nrhs4   1/1     Running   0          12m
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=go>victoria-logs-victoria-logs-cluster-vlstorage-0                 1/1     Running   0          12m
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=go>victoria-logs-victoria-logs-cluster-vlstorage-1                 1/1     Running   0          11m
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=go>victoria-logs-victoria-logs-cluster-vlstorage-2                 1/1     Running   0          9m39s
</span></span></span></code></pre></div><p>And start using the Web UI which is exposed using <a href=https://blog.ogenki.io/post/cilium-gateway-api/>Cilium and Gateway API resources</a> 🎉</p><center><video id=VictoriaLogs controls width=1000 autoplay loop muted>
<source src=vlog_demo.mp4 type=video/mp4>Your browser does not support the video tag.
</video>
<script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("VictoriaLogs");e.playbackRate=1.5})</script></center><div class="notices tip"><div class=label>⚙️ Deployment: where to find the full configuration</div><p>All the configuration used for writing this article can be found in the <strong><a href=https://github.com/Smana/cloud-native-ref>Cloud Native Ref</a></strong> repository.</br></p><p>The ambition of this project is to be able to <strong>quickly start a complete platform</strong> that applies best practices in terms of automation, monitoring, security, etc.</br></p><p>Comments and contributions are welcome 🙏</p></div><h2 id=-logsql-a-powerful-and-easy-to-learn-language>👩‍💻 LogsQL: A powerful and easy-to-learn language</h2><p>LogsQL stands out for its ability to perform fast <strong>full-text</strong> searches and use the <strong>fields</strong> exposed by the logs.</p><p>For example, we can search for logs generated by pods whose name starts with <code>loggen</code>, then filter these results by including or excluding (by prefixing with <code>-</code>) certain character strings.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>kubernetes.pod_name: &#34;loggen&#34;* &#34;GET /homepage&#34; -&#34;example.com&#34;
</span></span></code></pre></div><p>This query will therefore return all calls to the homepage with the GET method, excluding logs containing the domain "example.com".</p><p>💡 <strong>Remember</strong>: Full-text search is performed on the content of the <code>_msg</code> field.</p><p>We will now look at a few examples of simple queries that we could use in a Kubernetes environment.</p><h3 id=-kubernetes-events>☸ Kubernetes Events</h3><p>Kubernetes events are a valuable source of information because they often reveal problems related to resource state changes or errors that are not visible elsewhere. It's therefore advisable to analyze them regularly.</p><p>⚠️ <strong>Limitation</strong>: These events are ephemeral, and if you want to explore their history, you need a solution to persist this data. Until Vector supports this feature, I'm using <a href=https://github.com/resmoio/kubernetes-event-exporter>Kubernetes Event Exporter</a>, although the project doesn't seem very active.</p><p>Once the solution is deployed, we can search for events using the <code>source</code> field.</p><center><img src=k8s-event-exporter.png width=1000 alt></center><ul><li>Use the <code>~</code> character to search for <strong>a string within a field</strong>. Here we can view the error notifications for a policy validation defined by Kyverno.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=ln>1</span><span class=cl><span class=n>source</span><span class=p>:</span><span class=s2>&#34;kubernetes-event-exporter&#34;</span> <span class=n>AND</span> <span class=n>type</span><span class=p>:</span> <span class=s2>&#34;Warning&#34;</span> <span class=n>AND</span> <span class=n>message</span><span class=p>:</span><span class=o>~</span><span class=s2>&#34;validation error: Privileged mode is disallowed&#34;</span>
</span></span></code></pre></div><ul><li>The following query uses the <a href=https://docs.victoriametrics.com/victorialogs/logsql/#logical-filter>logical operators</a> <code>AND</code> and <code>NOT</code> to view events of type "Warning" while filtering out Kyverno errors.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=ln>1</span><span class=cl><span class=n>source</span><span class=p>:</span><span class=s2>&#34;kubernetes-event-exporter&#34;</span> <span class=n>AND</span> <span class=n>type</span><span class=p>:</span> <span class=s2>&#34;Warning&#34;</span> <span class=n>AND</span> <span class=n>NOT</span> <span class=n>reason</span><span class=p>:</span> <span class=s2>&#34;PolicyViolation&#34;</span>
</span></span></code></pre></div><h3 id=-web-server-logs>🌐 Web Server Logs</h3><p>For the purpose of this article, I created a <a href=https://github.com/Smana/loggen>small and simple log generator</a>.
It allows simulating web server type logs in order to run a few queries.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=ln> 1</span><span class=cl><span class=go>loggen --sleep 1 --error-rate 0.2 --format json
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=go></span><span class=err>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=err></span><span class=go>{
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=go>  &#34;remote_addr&#34;: &#34;208.175.166.30&#34;,
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=go>  &#34;remote_user&#34;: &#34;-&#34;,
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=go>  &#34;time_local&#34;: &#34;19/Apr/2025:02:11:56 &#34;,
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=go>  &#34;request&#34;: &#34;PUT /contact HTTP/1.1&#34;,
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=go>  &#34;status&#34;: 202,
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=go>  &#34;body_bytes_sent&#34;: 3368,
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=go>  &#34;http_referer&#34;: &#34;[https://github.com/](https://github.com/)&#34;,
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=go>  &#34;http_user_agent&#34;: &#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.1 Safari/605.1.15&#34;,
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=go>  &#34;country&#34;: &#34;AU&#34;,
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=go>  &#34;request_time&#34;: 0.532
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=go>}
</span></span></span></code></pre></div><p>💡 <strong>Remember</strong>: Logs emitted by applications in JSON format allow all fields of the JSON object to be indexed. This simplifies searches and calculations. However, you must remain mindful of cardinality, which can impact performance.</p><p>Vector is configured to <strong>parse JSON logs</strong> and extract their fields. If it's not a JSON log, it keeps the original message without modifying it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=w>    </span><span class=nt>transforms</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w>      </span><span class=nt>parser</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>        </span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w>        </span>- <span class=l>k8s</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w>        </span><span class=nt>source</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=sd>          .log = parse_json(.message) ?? .message
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=sd>          del(.message)</span><span class=w>          
</span></span></span><span class=line><span class=ln>8</span><span class=cl><span class=w>        </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>remap</span><span class=w>
</span></span></span></code></pre></div><p>We thus obtain new fields prefixed with <code>log</code> in the logs stored by VictoriaLogs.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=ln> 1</span><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>  <span class=nt>&#34;log.body_bytes_sent&#34;</span><span class=p>:</span> <span class=s2>&#34;4832&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  <span class=nt>&#34;log.country&#34;</span><span class=p>:</span> <span class=s2>&#34;AU&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=nt>&#34;log.http_referer&#34;</span><span class=p>:</span> <span class=s2>&#34;-&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>  <span class=nt>&#34;log.http_user_agent&#34;</span><span class=p>:</span> <span class=s2>&#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.1 Safari/605.1.15&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>  <span class=nt>&#34;log.remote_addr&#34;</span><span class=p>:</span> <span class=s2>&#34;84.74.62.151&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=nt>&#34;log.remote_user&#34;</span><span class=p>:</span> <span class=s2>&#34;-&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>  <span class=nt>&#34;log.request&#34;</span><span class=p>:</span> <span class=s2>&#34;PUT /products HTTP/1.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>  <span class=nt>&#34;log.request_time&#34;</span><span class=p>:</span> <span class=s2>&#34;1.191&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>  <span class=nt>&#34;log.status&#34;</span><span class=p>:</span> <span class=s2>&#34;204&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>  <span class=nt>&#34;log.time_local&#34;</span><span class=p>:</span> <span class=s2>&#34;27/Jul/2025:10:57:48 &#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>  <span class=err>&lt;REDACTED&gt;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Thanks to this, we can now write queries directly on the value of the fields. Here are some concrete examples:</p><ul><li><p><strong>Count HTTP codes and sort them in descending order:</strong></br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>kubernetes.pod_name:&#34;loggen&#34;* | stats by (log.status) count() as count | sort by (count desc)
</span></span></code></pre></div><p>💡 By using <code>stats</code>, it's possible to perform advanced calculations; <a href=https://docs.victoriametrics.com/victorialogs/logsql/#stats-pipe-functions>many functions</a> are available.</p></li></ul><center><img src=http-codes-count.png width=600 alt></center><ul><li>We previously saw that the <code>~</code> character allows searching for a string within a field. This character indicates that we are using regular expressions (<code>regexp</code>), as shown in this simple example to search only for requests from Japan or Italy.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>_time:5m kubernetes.pod_name: &#34;loggen&#34;* AND log.country:~&#34;JP|IT&#34;
</span></span></code></pre></div><ul><li>Other comparison operators can be used. Here <code>></code> is used to filter only logs whose execution time exceeds 1.5 seconds.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>kubernetes.pod_labels.app.kubernetes.io/instance:&#34;loggen&#34; AND log.request_time:&gt;1.5
</span></span></code></pre></div><div class="notices tip"><div class=label>💻 vlogcli for running queries</div><p>There is also a command-line tool that allows you to execute queries from a terminal: <a href=https://docs.victoriametrics.com/victorialogs/querying/vlogscli/>vlogcli</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=ln> 1</span><span class=cl><span class=go>vlogscli -datasource.url=&#39;[https://vl.priv.cloud.ogenki.io/select/logsql/query](https://vl.priv.cloud.ogenki.io/select/logsql/query)&#39;
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=go>sending queries to -datasource.url=[https://vl.priv.cloud.ogenki.io/select/logsql/query](https://vl.priv.cloud.ogenki.io/select/logsql/query)
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=go>type ? and press enter to see available commands
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=go>;&gt; kubernetes.pod_labels.app.kubernetes.io/instance:&#34;loggen&#34; | stats quantile(0.5, log.request_time) p50, quantile(0.9, log.request_time) p90, quantile(0.99, log.request_time) p99
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=go>executing [&#34;kubernetes.pod_labels.app.kubernetes.io/instance&#34;:loggen | stats quantile(0.5, log.request_time) as p50, quantile(0.9, log.request_time) as p90, quantile(0.99, log.request_time) as p99]...; duration: 2.500s
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=go>{
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=go>  &#34;p50&#34;: &#34;1.022&#34;,
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=go>  &#34;p90&#34;: &#34;1.565&#34;,
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=go>  &#34;p99&#34;: &#34;1.686&#34;
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=go>}
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=go>;&gt;
</span></span></span></code></pre></div></div><h2 id=-grafana-integration>📊 Grafana Integration</h2><p>Integration with Grafana is done with the dedicated <a href=https://grafana.com/grafana/plugins/victoriametrics-logs-datasource/><em>Datasource</em></a>. This allows building graphs from the data present in VictoriaLogs.</p><p>Here, we use the Kubernetes operator for Grafana, which allows declaring configuration through custom resources (<a href=https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/#custom-resources>Custom Resources</a>).</p><p>There is therefore a <code>GrafanaDatasource</code> resource to add the connection to VictoriaLogs by indicating the address of the <code>VLSelect</code> service.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>grafana.integreatly.org/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>GrafanaDatasource</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>vl-datasource</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>observability</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>  </span><span class=nt>allowCrossNamespaceImport</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>  </span><span class=nt>datasource</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>    </span><span class=nt>access</span><span class=p>:</span><span class=w> </span><span class=l>proxy</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>victoriametrics-logs-datasource</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>VictoriaLogs</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>http://victoria-logs-victoria-logs-cluster-vlselect.observability:9471](http://victoria-logs-victoria-logs-cluster-vlselect.observability:9471)</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>  </span><span class=nt>instanceSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w>      </span><span class=nt>dashboards</span><span class=p>:</span><span class=w> </span><span class=l>grafana</span><span class=w>
</span></span></span></code></pre></div><p>We can then use this Datasource to execute queries and build graphs.</p><center><img src=first-graph.png width=700 alt></center><p>There are also <a href="https://grafana.com/grafana/dashboards/?search=victorialogs">ready-to-use dashboards</a>.</p><p>Configuring a new dashboard is just as simple thanks to the Grafana operator. We specify the dashboard's address accessible from the Grafana.com API.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>grafana.integreatly.org/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>GrafanaDashboard</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>observability-victoria-logs-cluster</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>observability</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>  </span><span class=nt>allowCrossNamespaceImport</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>  </span><span class=nt>datasources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>    </span>- <span class=nt>inputName</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;DS_VICTORIALOGS&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>      </span><span class=nt>datasourceName</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;VictoriaLogs&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>  </span><span class=nt>instanceSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>      </span><span class=nt>dashboards</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;grafana&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>  </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;[https://grafana.com/api/dashboards/23274/revisions/2/download](https://grafana.com/api/dashboards/23274/revisions/2/download)&#34;</span><span class=w>
</span></span></span></code></pre></div><p>This one allows us to analyze the performance of the VictoriaLogs cluster components.</p><center><img src=cluster-dashboard.png width=1000 alt></center><p>Another dashboard can be useful for viewing logs and thus unifying metrics and logs at a single address.</p><center><img src=explorer-dashboard.png width=1000 alt></center><h2 id=-sending-alerts>🚨 Sending Alerts</h2><p>It is possible to <strong>trigger alerts based on log analysis</strong>.</p><p>Alerting uses <a href=https://docs.victoriametrics.com/victoriametrics/vmalert/>VMAlert</a>, the alerting component of the VictoriaMetrics ecosystem.</p><p>An additional instance <strong>dedicated</strong> to log analysis has been added (another instance being already deployed for metrics):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>operator.victoriametrics.com/v1beta1](https://operator.victoriametrics.com/v1beta1)</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>VMAlert</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>    </span><span class=nt>app.kubernetes.io/component</span><span class=p>:</span><span class=w> </span><span class=l>victoria-logs-vmalert</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>    </span><span class=nt>app.kubernetes.io/instance</span><span class=p>:</span><span class=w> </span><span class=l>victoria-logs</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>victoria-logs</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>observability</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>  </span><span class=nt>ruleSelector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>      </span><span class=nt>vmlog</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>  </span><span class=nt>datasource</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>http://victoria-logs-victoria-logs-cluster-vlselect.observability.svc.cluster.local](http://victoria-logs-victoria-logs-cluster-vlselect.observability.svc.cluster.local).:9471</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w>  </span><span class=nt>evaluationInterval</span><span class=p>:</span><span class=w> </span><span class=l>20s</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>    </span><span class=nt>tag</span><span class=p>:</span><span class=w> </span><span class=l>v1.122.0</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>  </span><span class=nt>notifiers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w>    </span>- <span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>http://vmalertmanager-victoria-metrics-k8s-stack-0.vmalertmanager-victoria-metrics-k8s-stack.observability.svc.cluster.local](http://vmalertmanager-victoria-metrics-k8s-stack-0.vmalertmanager-victoria-metrics-k8s-stack.observability.svc.cluster.local).:9093</span><span class=w>
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=w>  </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;8080&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=w>  </span><span class=nt>remoteRead</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>http://vmselect-victoria-metrics-k8s-stack.observability.svc.cluster.local](http://vmselect-victoria-metrics-k8s-stack.observability.svc.cluster.local).:8481</span><span class=w>
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=w>  </span><span class=nt>remoteWrite</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=w>    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>http://vminsert-victoria-metrics-k8s-stack.observability.svc.cluster.local](http://vminsert-victoria-metrics-k8s-stack.observability.svc.cluster.local).:8480/api/v1/write</span><span class=w>
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=w>  </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=w>    </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=l>100m</span><span class=w>
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>256Mi</span><span class=w>
</span></span></span><span class=line><span class=ln>29</span><span class=cl><span class=w>    </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=w>      </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=l>100m</span><span class=w>
</span></span></span><span class=line><span class=ln>31</span><span class=cl><span class=w>      </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>128Mi</span><span class=w>
</span></span></span></code></pre></div><ul><li><strong>AlertManager Integration</strong>: Uses the AlertManager instance deployed with VictoriaMetrics for notification management.</li><li><strong>Rule Selector</strong>: Only evaluates VMRules with the label <code>vmlog: "true"</code>, allowing the separation of log alerts from metric alerts.</li><li><strong>Alert Storage</strong>: Alerts are stored as metrics in VictoriaMetrics for history and analysis.</li></ul><p>Here is a concrete example of an alert that detects an excessively high rate of HTTP errors:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>operator.victoriametrics.com/v1beta1](https://operator.victoriametrics.com/v1beta1)</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>VMRule</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>loggen</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>observability</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>    </span><span class=nt>vmlog</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>  </span><span class=nt>groups</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>loggen</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>vlogs</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>10m</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>      </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>        </span>- <span class=nt>alert</span><span class=p>:</span><span class=w> </span><span class=l>LoggenHTTPError500</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w>          </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w>            </span><span class=nt>message</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;The application Loggen is throwing too many errors in the last 10 minutes&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>            </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;The pod `{{ index $labels &#34;kubernetes.pod_name&#34; }}` has `{{ $value }}` server errors in the last 10 minutes&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>          </span><span class=nt>expr</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;kubernetes.pod_labels.app.kubernetes.io/instance:&#34;loggen&#34; AND log.status:&#34;5&#34;* | stats by (kubernetes.pod_name) count() as server_errors | filter server_errors:&gt;100&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w>          </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=w>            </span><span class=nt>severity</span><span class=p>:</span><span class=w> </span><span class=l>warning</span><span class=w>
</span></span></span></code></pre></div><p>If <code>AlertManager</code> is configured to send to Slack as explained in <a href=https://blog.ogenki.io/post/series/observability/alerts/>this article</a>, we get the following result:</p><center><img src=alert-example.png width=600 alt></center><h2 id=-final-remarks>💭 Final Remarks</h2><p>This exploration of VictoriaLogs leads me to say that the solution is simple to install and configure. The concepts are rather easy to grasp, whether it's the modular architecture of the cluster mode or the LogsQL language.
Indeed, this language is very intuitive, and one quickly gets used to the syntax.</p><p>Moreover, if we refer to the published performance tests, the query execution times as well as the effective data compression allow for projections on large-scale platforms.</p><p>As you might have guessed, despite the solution being relatively young, I would highly recommend studying it and taking an approach that allows comparison with your existing solutions before considering a switch 😉</p><h2 id=-references>🔖 References</h2><p>📚 <strong>Official Documentation and Resources</strong></p><ul><li><a href=https://docs.victoriametrics.com/victorialogs/>Official VictoriaLogs Documentation</a></li><li><a href=https://victoriametrics.com/blog/>VictoriaMetrics Blog</a></li><li><a href=https://docs.victoriametrics.com/victorialogs/roadmap/>VictoriaLogs Roadmap</a> - Upcoming features</li><li><a href=https://play-vmlogs.victoriametrics.com>LogsQL Playground</a> - Practice the LogsQL language</li></ul><p>🔍 <strong>Comparisons and Performance Analyses</strong></p><ul><li><a href=https://www.truefoundry.com/blog/victorialogs-vs-loki>VictoriaLogs vs Loki</a> - Detailed comparative analysis</li><li><a href=https://medium.com/@kienlt.qn/victorialogs-the-space-efficient-alternative-to-elasticsearch-for-log-management-b9948f4ef05c>VictoriaLogs: The Space-Efficient Alternative to Elasticsearch</a></li><li><a href=https://benchmark.clickhouse.com/>ClickBench</a> - Performance benchmarks</li></ul><p>🛠️ <strong>Tools and Integrations</strong></p><ul><li><a href=https://github.com/vectordotdev/vector/issues/1293>Support for Kubernetes events in Vector</a> - Ongoing GitHub issue</li><li><a href=https://github.com/resmoio/kubernetes-event-exporter>Kubernetes Event Exporter</a> - Persisting K8s events</li></ul><p>💬 <strong>Community and Support</strong></p><ul><li><a href=https://victoriametrics.slack.com/>VictoriaMetrics Slack</a> - #victorialogs channel</li><li><a href=https://github.com/VictoriaMetrics/VictoriaLogs/issues>VictoriaLogs GitHub Issues</a> - Report bugs or request features</li></ul></div><h2 class=post_related>Posts in this series</h2><ul></ul><div class=post_comments></div><div class=post_i18n><h3 class=mb-0>Translations:</h3><nav class=tags_nav><a href=https://blog.ogenki.io/fr/post/series/observability/logs/ class="post_tag button button_translucent">Français</a></nav></div></article><aside class=sidebar><section class=sidebar_inner><br><div class=search><input type=search class="search_field form_field" placeholder=Search... id=find autocomplete=off data-scope=post>
<label for=find class=search_label><svg class="icon"><title>search</title><use xlink:href="#search"/></svg></label><div class="search_results results"></div></div><div class=author_header><img src=https://blog.ogenki.io/images/smana.jpg alt="Smaine Kahlouch photo"><h2>Smaine Kahlouch</h2></div><div class=author_bio>Lead SRE/DevOps, Team leader, Open Source enthusiast.</div><a href=https://blog.ogenki.io/about/ class="button mt-1" role=button title='Read More'>Read More</a><h2 class=mt-4>Posts in this series</h2><ul></ul><h2 class=mt-4>Featured Posts</h2><ul><li><a href=https://blog.ogenki.io/post/series/observability/logs/ class=nav-link title="`VictoriaLogs`: What if logs management became simple and performant?"><code>VictoriaLogs</code>: What if logs management became simple and performant?</a></li><li><a href=https://blog.ogenki.io/post/series/observability/alerts/ class=nav-link title="`VictoriaMetrics` : Effective alerts, from theory to practice 🛠️"><code>VictoriaMetrics</code> : Effective alerts, from theory to practice 🛠️</a></li><li><a href=https://blog.ogenki.io/post/series/observability/metrics/ class=nav-link title="Harness the Power of `VictoriaMetrics` and `Grafana` Operators for Metrics Management">Harness the Power of <code>VictoriaMetrics</code> and <code>Grafana</code> Operators for Metrics Management</a></li><li><a href=https://blog.ogenki.io/post/pki-gapi/ class=nav-link title="`TLS` with Gateway API: Efficient and Secure Management of Public and Private Certificates"><code>TLS</code> with Gateway API: Efficient and Secure Management of Public and Private Certificates</a></li></ul><h2 class=mt-4>Recent Posts</h2><ul class=flex-column><li><a href=https://blog.ogenki.io/post/dagger-intro/ class=nav-link title="`Dagger`: The missing piece of the developer experience?"><code>Dagger</code>: The missing piece of the developer experience?</a></li><li><a href=https://blog.ogenki.io/post/crossplane_composition_functions/ class=nav-link title="Going Further with `Crossplane`: Compositions and Functions">Going Further with <code>Crossplane</code>: Compositions and Functions</a></li><li><a href=https://blog.ogenki.io/post/tailscale/ class=nav-link title="Beyond Traditional VPNs: Simplifying Cloud Access with `Tailscale`">Beyond Traditional VPNs: Simplifying Cloud Access with <code>Tailscale</code></a></li><li><a href=https://blog.ogenki.io/post/cilium-gateway-api/ class=nav-link title="`Gateway API`: Can I replace my Ingress Controller with `Cilium`?"><code>Gateway API</code>: Can I replace my Ingress Controller with <code>Cilium</code>?</a></li><li><a href=https://blog.ogenki.io/post/terraform-controller/ class=nav-link title="Applying GitOps Principles to Infrastructure: An overview of `tf-controller`">Applying GitOps Principles to Infrastructure: An overview of <code>tf-controller</code></a></li><li><a href=https://blog.ogenki.io/post/cnpg/ class=nav-link title="`CloudNativePG`: An easy way to run PostgreSQL on Kubernetes"><code>CloudNativePG</code>: An easy way to run PostgreSQL on Kubernetes</a></li><li><a href=https://blog.ogenki.io/post/devflux/ class=nav-link title="100% `GitOps` using Flux">100% <code>GitOps</code> using Flux</a></li><li><a href=https://blog.ogenki.io/post/crossplane_k3d/ class=nav-link title="My Kubernetes cluster (GKE) with `Crossplane`">My Kubernetes cluster (GKE) with <code>Crossplane</code></a></li></ul><div><h2 class="mt-4 taxonomy" id=categories-section>Categories</h2><nav class=tags_nav><a href=https://blog.ogenki.io/categories/containers/ class="post_tag button button_translucent" title=containers>CONTAINERS
<span class=button_tally>7</span>
</a><a href=https://blog.ogenki.io/categories/devxp/ class="post_tag button button_translucent" title=devxp>DEVXP
<span class=button_tally>6</span></a></nav></div><div><h2 class="mt-4 taxonomy" id=series-section>Series</h2><nav class=tags_nav><a href=https://blog.ogenki.io/series/workshop-kubernetes/ class="post_tag button button_translucent" title="workshop kubernetes">WORKSHOP KUBERNETES
<span class=button_tally>7</span>
</a><a href=https://blog.ogenki.io/series/workshop-helm/ class="post_tag button button_translucent" title="workshop helm">WORKSHOP HELM
<span class=button_tally>6</span>
</a><a href=https://blog.ogenki.io/series/observability/ class="post_tag button button_translucent" title=observability>OBSERVABILITY
<span class=button_tally>3</span></a></nav></div><div><h2 class="mt-4 taxonomy" id=tags-section>Tags</h2><nav class=tags_nav><a href=https://blog.ogenki.io/tags/kubernetes/ class="post_tag button button_translucent" title=kubernetes>KUBERNETES
<span class=button_tally>15</span>
</a><a href=https://blog.ogenki.io/tags/helm/ class="post_tag button button_translucent" title=helm>HELM
<span class=button_tally>6</span>
</a><a href=https://blog.ogenki.io/tags/infrastructure/ class="post_tag button button_translucent" title=infrastructure>INFRASTRUCTURE
<span class=button_tally>4</span>
</a><a href=https://blog.ogenki.io/tags/devxp/ class="post_tag button button_translucent" title=devxp>DEVXP
<span class=button_tally>3</span>
</a><a href=https://blog.ogenki.io/tags/observability/ class="post_tag button button_translucent" title=observability>OBSERVABILITY
<span class=button_tally>3</span>
</a><a href=https://blog.ogenki.io/tags/gitops/ class="post_tag button button_translucent" title=gitops>GITOPS
<span class=button_tally>2</span>
</a><a href=https://blog.ogenki.io/tags/network/ class="post_tag button button_translucent" title=network>NETWORK
<span class=button_tally>2</span>
</a><a href=https://blog.ogenki.io/tags/security/ class="post_tag button button_translucent" title=security>SECURITY
<span class=button_tally>2</span>
</a><a href=https://blog.ogenki.io/tags/data/ class="post_tag button button_translucent" title=data>DATA
<span class=button_tally>1</span>
</a><a href=https://blog.ogenki.io/tags/index/ class="post_tag button button_translucent" title=index>INDEX
<span class=button_tally>1</span>
</a><a href=https://blog.ogenki.io/tags/local/ class="post_tag button button_translucent" title=local>LOCAL
<span class=button_tally>1</span>
</a><a href=https://blog.ogenki.io/tags/tooling/ class="post_tag button button_translucent" title=tooling>TOOLING
<span class=button_tally>1</span></a></nav></div></section></aside></div></main><svg width="0" height="0" class="hidden"><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter"><path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68.0 01-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043.0-1.924.366-2.643 1.078A3.56 3.56.0 008.766 5.383c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846.0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47.0.929.273 1.705.82 2.388a3.623 3.623.0 002.115 1.291c-.312.08-.641.118-.979.118-.312.0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652.0 002.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422.0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139.0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77.0 001.172-4.892v-.468a7.788 7.788.0 001.84-1.921 8.142 8.142.0 01-2.11.593z"/></symbol><symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V4e2c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5.0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar"><path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916.0 1e2v352c0 33.084 26.916 60 60 60h392c33.084.0 60-26.916 60-60V1e2c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028.0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028.0 20 8.972 20 20v48z"/><path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github"><path d="M255.968 5.329C114.624 5.329.0 120.401.0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384.0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008.0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992.0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584.0 34.368-.32 62.08-.32 70.496.0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab"><path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6.0L12.3 74.8z"/><path d="M12.3 74.7.5 111c-1 3.2.0 6.8 3 8.8l101.6 74-92.5-119z"/><path d="M105 193.7l-38.6-119h-54l92.7 119z"/><path d="M105 193.7l38.7-119H66.4l38.7 119z"/><path d="M105 193.7l38.7-119H198l-93 119z"/><path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/><path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6.0L198 74.8z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss"><circle cx="3.429" cy="20.571" r="3.429"/><path d="M11.429 24h4.57C15.999 15.179 8.821 8.001.0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"/><path d="M24 24C24 10.766 13.234.0.0.0v4.571c10.714.0 19.43 8.714 19.43 19.429z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h362c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="to-top"><path d="M604.501 440.509 325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298.0 36.323s26.223 10.024 36.222.0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221.0 9.999-10.023 9.999-26.298.0-36.323z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly"><path d="M504.971 239.029 448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c19.851.0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002.0 004e2 320v108c0 19.851-16.149 36-36 36h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c46.318.0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568.0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255.0 24-10.745 24-24S205.255.0 192 0h-44c-46.318.0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568.0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255.0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851.0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002.0 00112 192z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy"><path d="M23 2.75A2.75 2.75.0 0020.25.0H8.75A2.75 2.75.0 006 2.75v13.5A2.75 2.75.0 008.75 19h11.5A2.75 2.75.0 0023 16.25zM18.25 14.5h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5z"/><path d="M8.75 20.5A4.255 4.255.0 014.5 16.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752.0 001 5.25v16A2.752 2.752.0 003.75 24h12a2.752 2.752.0 002.75-2.75v-.75z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme"><path d="M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475.0-28.285-7.811-7.81-20.475-7.811-28.285.0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285.0-7.81 7.811-7.811 20.475.0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475.0 28.285a19.938 19.938.0 0014.143 5.857 19.94 19.94.0 0014.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475.0-28.285L284.286 256.002z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu"><path d="M492 236H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954.0 96s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram"><path d="M12 2.163c3.204.0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849.0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204.0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849.0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741.0 8.333.014 7.053.072c-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.668.072 4.948c.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24s3.668-.014 4.948-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403.0-6.162 2.759-6.162 6.162S8.597 18.163 12 18.163s6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zM12 16c-2.209.0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796.0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795.0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="youtube"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23.0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23.0C23.512 20.55 23.971 18.196 24 12c-.029-6.185-.484-8.549-4.385-8.816zM9 16V8l8 3.993L9 16z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow"><path d="M21 27v-8h3v11H0V19h3v8h18z"/><path d="M17.1.2 15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8 13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="xing"><path d="M18.188.0c-.517.0-.741.325-.927.66.0.0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211.0.375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016.0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894.0 21.686.0h-3.498zM3.648 4.74c-.211.0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016.0.021L1.86 16.051c-.099.188-.093.381.0.529.085.142.239.234.45.234h3.461c.518.0.766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 55" id="discord"><path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527.41542 45.5603.39851 45.468.440769 45.4204.525289 44.7963 1.6353 44.105 3.0834 43.6209 4.2216c-5.4572-.817-10.8864-.817-16.2317.0C26.905 3.0581 26.1886 1.6353 25.5617.525289 25.5141.443589 25.4218.40133 25.3294.41542c-5.071.87338-9.9237 2.40318-14.4518 4.48238C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795 1.57795 18.7309-.943561 32.1443.293408 45.3914.299005 45.4562.335386 45.5182.385761 45.5576 6.45866 50.0174 12.3413 52.7249 18.1147 54.5195 18.2071 54.5477 18.305 54.5139 18.3638 54.4378 19.7295 52.5728 20.9469 50.6063 21.9907 48.5383 22.0523 48.4172 21.9935 48.2735 21.8676 48.2256 19.9366 47.4931 18.0979 46.6 16.3292 45.5858 16.1893 45.5041 16.1781 45.304 16.3068 45.2082 16.679 44.9293 17.0513 44.6391 17.4067 44.3461 17.471 44.2926 17.5606 44.2813 17.6362 44.3151c11.6196 5.3051 24.1992 5.3051 35.6817.0C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433 53.9057 44.6363 54.2779 44.9293 54.6529 45.2082 54.7816 45.304 54.7732 45.5041 54.6333 45.5858c-1.7687 1.0339-3.6074 1.9073-5.5412 2.637C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383c1.0662 2.0651 2.2836 4.0316 3.6241 5.8967C52.6519 54.5139 52.7526 54.5477 52.845 54.5195c5.8014-1.7946 11.684-4.5021 17.7569-8.9619C70.6551 45.5182 70.6887 45.459 70.6943 45.3942 72.1747 30.0791 68.2147 16.7757 60.1968 4.9823 60.1772 4.9429 60.1437 4.9147 60.1045 4.8978zM23.7259 37.3253c-3.4983.0-6.3808-3.2117-6.3808-7.156s2.8266-7.156 6.3808-7.156c3.5821.0 6.4367 3.2399 6.3807 7.156.0 3.9443-2.8266 7.156-6.3807 7.156zm23.5919.0c-3.4982.0-6.3807-3.2117-6.3807-7.156s2.8265-7.156 6.3807-7.156c3.5822.0 6.4367 3.2399 6.3808 7.156.0 3.9443-2.7986 7.156-6.3808 7.156z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 18" id="mastodon"><path fill="#fff" d="m15.054695 9.8859583c-.22611 1.1632697-2.02517 2.4363497-4.09138 2.6830797-1.0774504.12856-2.1382704.24673-3.2694704.19484-1.84996-.0848-3.30971-.44157-3.30971-.44157.0.1801.0111.35157.0333.51194.24051 1.82571 1.81034 1.93508 3.29737 1.98607 1.50088.0514 2.8373104-.37004 2.8373104-.37004l.0617 1.35686s-1.0498104.56374-2.9199404.66742c-1.03124.0567-2.3117-.0259-3.80308-.42069-3.23454998-.85613-3.79081998-4.304-3.87592998-7.8024197-.026-1.03871-.01-2.01815-.01-2.83732.0-3.57732 2.34385998-4.62587996 2.34385998-4.62587996 1.18184-.54277 3.20976-.77101 5.318-.7882499985409h.0518C9.8267646.01719834 11.856025.24547834 13.037775.78824834c0 0 2.34377 1.04855996 2.34377 4.62587996.0.0.0294 2.63937-.32687 4.47183"/><path fill="#000" d="m12.616925 5.6916583v4.3315297h-1.71607V5.8189683c0-.88624-.37289-1.33607-1.1187604-1.33607-.82467.0-1.23799.53361-1.23799 1.58875v2.30122h-1.70594v-2.30122c0-1.05514-.4134-1.58875-1.23808-1.58875-.74587.0-1.11876.44983-1.11876 1.33607v4.2042197h-1.71607V5.6916583c0-.88527.22541-1.58876.67817-2.10922.46689-.52047 1.07833-.78727 1.83735-.78727.87816.0 1.54317.33752 1.98288 1.01267l.42744.71655.42753-.71655c.43961-.67515 1.10463-1.01267 1.9828704-1.01267.75893.0 1.37037.2668 1.83735.78727.45268.52046.67808 1.22395.67808 2.10922"/></symbol></svg><footer class=footer><div class="footer_inner wrap pale"><img src=https://blog.ogenki.io/icons/footer.png class="icon icon_2 transparent" alt="Copyright © 2021–2023, Smana https://github.io/Smana"><p>Copyright&nbsp;<span class=year></span>&nbsp;COPYRIGHT © 2021–2023, SMANA HTTPS://GITHUB.IO/SMANA. All Rights Reserved</p><a class=to_top href=#documentTop><svg class="icon"><title>to-top</title><use xlink:href="#to-top"/></svg></a></div></footer><script type=text/javascript src=https://blog.ogenki.io/en/js/bundle.fb0be5bcaafc43d845951fd0966e48e5a7bf36be99ce2176c89d369bb5a8136dfb14e596d145cfa04c4c3b79232ffffd811a01eccee956d9d61cf49330e633c7.js integrity="sha512-+wvlvKr8Q9hFlR/Qlm5I5ae/Nr6ZziF2yJ02m7WoE237FOWW0UXPoExMO3kjL//9gRoB7M7pVtnWHPSTMOYzxw==" crossorigin=anonymous></script><script src=https://blog.ogenki.io/js/search.min.73cb82d8f274395dd220d6594053cd3d3d8ac8c97d874b5142a60b9744f3704d765551e0ade104d5803c66b731f5a7a00ac2cff33c8c9090ff8100169a3e2574.js></script></body></html>